import React, { useState } from 'react'

function VulnerabilityForm({obtenerMensaje}) {
    const[ mensaje, actualizarMensaje ] = useState({
      email: ""
    });

    const[ error, actualizarError ] = useState(false)
    let mensajeObtenido = "Nada";

    const { email } = mensaje;

    const handleEvent = (e) => {
      e.preventDefault();
      if(email.trim() === ''){
        actualizarError(true);
        return;
      }

      actualizarError(false);
      mensajeObtenido = "Todo el texto de la peticion";

      obtenerMensaje(mensajeObtenido);
      actualizarMensaje({
        email: ""
      })
    }

    const handleChange = e => {
      actualizarMensaje({
        ...mensaje,
        [e.target.name]:e.target.value
      })
    }

    

    return (
        <div>
          <h1>Vulnerability</h1>
          { error ? <p className="alerta-error">Todos los campos son obligatorios</p> : null}
          <form className="vertical-center-content">
            <div className="form-group">
              <label for="exampleInputEmail1">Correo</label>
              <input 
                type="text" 
                name="email"
                className="form-control"
                id="exampleInputEmail1" 
                aria-describedby="emailHelp" 
                placeholder="Enter email"
                onChange={handleChange}
                value={email}
              ></input>
              <small id="emailHelp" className="form-text text-muted">No compartiremos tus datos con nadien</small>
              <button type="submit" className="btn btn-primary" onClick={handleEvent}>Imprimir correo</button>
            </div>
          </form>
        </div>
      )
}

export default VulnerabilityForm
